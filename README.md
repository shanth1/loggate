# LogGate: Высокопроизводительный шлюз для маршрутизации логов

[![Go Version](https://img.shields.io/github/go-mod/go-version/shanth1/loggate?style=flat-square)](https://go.dev/)
[![License](https://img.shields.io/badge/license-MIT-blue.svg?style=flat-square)](/LICENSE)

**LogGate** — это централизованный сервис-шлюз для приёма, буферизации и маршрутизации логов от различных приложений. Он спроектирован для высокой производительности и легкой расширяемости, позволяя направлять потоки логов в различные системы хранения на основе гибких правил.

Проект поставляется с готовым к использованию стеком мониторинга на базе **Prometheus, Grafana и Loki**, обеспечивая полное "коробочное" решение для сбора, хранения и визуализации логов и метрик.

## Ключевые особенности

- **Централизованный приём:** Принимает структурированные JSON-логи по протоколу UDP для минимальных задержек у отправителей.
- **Гибкая маршрутизация:** Правила в `config.yaml` позволяют направлять логи в разные хранилища (storages) на основе атрибутов лога (`service`, `level` и др.).
- **Высокая производительность:** Написан на Go. Использует внутреннюю буферизацию и пакетную обработку для минимизации нагрузки на системы хранения.
- **Расширяемая архитектура:** Адаптеры вывода позволяют легко добавлять поддержку новых хранилищ (ClickHouse, Elasticsearch и т.д.).
- **Готовый стек "из коробки":** `docker-compose.yaml` разворачивает не только LogGate, но и весь необходимый инструментарий: Prometheus, Loki, Grafana, cAdvisor.
- **Инструменты для разработки:** Включает генератор логов (`loggen`) для тестирования нагрузки и отладки.

## Стек технологий

- **Сервис:** Go
- **Оркестрация:** Docker, Docker Compose
- **Сбор метрик:** Prometheus, cAdvisor
- **Агрегация логов:** Loki, Promtail
- **Визуализация:** Grafana

## Быстрый старт

1.  **Подготовка:** Убедитесь, что у вас установлены `Docker`, `Docker Compose` и `make`.

2.  **Конфигурация:** Создайте файл `.env` из примера.

    ```bash
    cp .env.example .env
    ```

3.  **Запуск стека:** Соберите и запустите все сервисы в фоновом режиме.

    ```bash
    make up
    ```

4.  **Генерация тестовых логов:** Запустите генератор для отправки логов в LogGate.

    ```bash
    make gen-logs
    ```

5.  **Доступ к интерфейсам:**
    - **Grafana:** [http://localhost:3000](http://localhost:3000) (login: `admin`/`admin`)
      - _Дашборд "LogGate Application" уже будет доступен._
    - **Prometheus:** [http://localhost:9090](http://localhost:9090)
    - **cAdvisor:** [http://localhost:8080](http://localhost:8080)

## Документация

Полная документация разделена на несколько файлов для удобства навигации.

| Раздел                                                  | Описание                                                                           |
| :------------------------------------------------------ | :--------------------------------------------------------------------------------- |
| **[1. Архитектура](docs/01-architecture.md)**           | Обзор компонентов системы, схемы взаимодействия и потока данных.                   |
| **[2. Установка и запуск](docs/02-getting-started.md)** | Подробные инструкции по развертыванию для разработки и production.                 |
| **[3. Конфигурация](docs/03-configuration.md)**         | Детальное описание всех конфигурационных файлов (`config.yaml`, `.env`, Promtail). |
| **[4. Администрирование](docs/04-administration.md)**   | Задачи эксплуатации: мониторинг, резервное копирование, устранение неисправностей. |
| **[5. Разработка](docs/05-development.md)**             | Руководство для контрибьюторов: структура проекта, добавление новых хранилищ.      |

## Лицензия

Проект распространяется под лицензией MIT. Подробности в файле [LICENSE](/LICENSE).
